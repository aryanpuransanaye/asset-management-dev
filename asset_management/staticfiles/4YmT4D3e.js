import{_ as V,A as j,x as N,r as b,p as U,c as f,o as c,a as t,b as n,d,K as C,w as _,y as a,e as G,h as T,g as A,i as D,v as F,q as w,E as L}from"./BwLa1Iej.js";import{a as x}from"./bE3RgOHv.js";import{s as k}from"./BfYSEMx6.js";import{S as v}from"./BQxta0Da.js";import{u as R}from"./DBTBYWdU.js";const S={class:"w-full max-w-2xl"},q={class:"flex justify-between items-center mb-6 px-2"},z={class:"flex items-center text-2xl font-extrabold m-0 text-gray-900 dark:text-white"},E={class:"text-blue-500 text-3xl ml-3"},I={key:0,class:"absolute inset-0 z-20 flex flex-col justify-center items-center bg-gray-800/80 rounded-3xl backdrop-blur-sm"},K={class:"mb-6"},P={class:"input-group-modern relative"},H={class:"mb-6"},J={class:"input-group-modern relative"},O={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Q={class:"mb-8"},W={class:"input-group-modern relative"},X={class:"mt-4 pt-2 space-y-3"},Y=["disabled"],Z={key:0,class:"flex items-center justify-center"},ee={key:1,class:"flex items-center justify-center"},te={__name:"AddGroup",setup($){const i=R(),r=j(()=>i.value==="dark"),g=N(),o=b(!1),s=b({name:"",user:[],permissions:[]}),m=b([]),y=b([]),B=async()=>{o.value=!0;try{const[l,e]=await Promise.all([x.get("accounts/users-list/"),x.get("accounts/permissions-list/")]);m.value=l.data,y.value=e.data}catch(l){await v.fire({icon:"error",title:"انجام نشد",text:`خطایی رخ داده است ${l}`,timer:2e3,confirmButtonText:"باشه",background:i.value==="dark"?"#1e1e1e":"#fff",color:i.value==="dark"?"#fff":"#000"})}finally{o.value=!1}},M=async()=>{o.value=!0;try{const l={name:s.value.name,user:s.value.user.map(e=>e.id),permissions:s.value.permissions.map(e=>e.id)};await x.post("accounts/group-detail/",l),await v.fire({icon:"success",title:"موفقیت‌آمیز",text:`گروه "${s.value.name}" با موفقیت ایجاد شد`,confirmButtonText:"تایید",background:i.value==="dark"?"#1e1e1e":"#fff",color:i.value==="dark"?"#fff":"#000"}),g.back()}catch(l){const e=l.response?.data?.name?"نام گروه تکراری است.":"مشکلی در ایجاد گروه پیش آمد.";v.fire("خطا",e,"error")}finally{o.value=!1}};return U(B),(l,e)=>{const p=C,h=G;return c(),f("div",{class:a(["group-create-page w-full p-4 mt-2 sm:p-6 lg:p-8 min-h-screen flex justify-center items-start pt-10",r.value?"bg-gray-900 text-gray-50":"bg-[#F0F5F9] text-gray-900"]),dir:"rtl"},[t("div",S,[t("div",q,[t("h3",z,[t("span",E,[n(p,{name:"i-heroicons-rectangle-group",class:"w-7 h-7"})]),e[3]||(e[3]=d(" ایجاد گروه کاربری جدید ",-1))]),n(h,{to:"/dashboard/system-setting/group/group-list",class:a(["flex items-center cursor-pointer px-4 py-2 rounded-xl text-sm font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",(r.value,"bg-blue-600 hover:bg-blue-700 text-white shadow-blue-500/50")])},{default:_(()=>[n(p,{name:"i-heroicons-arrow-right",class:"w-5 h-5 ml-1"}),e[4]||(e[4]=d(" بازگشت ",-1))]),_:1},8,["class"])]),t("div",{class:a(["form-card shadow-2xl p-6 md:p-8 w-full rounded-3xl mx-auto relative min-h-[300px]",r.value?"bg-gray-800 border border-gray-700":"bg-white border border-gray-100"])},[o.value?(c(),f("div",I,[...e[5]||(e[5]=[t("div",{class:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full"},null,-1),t("p",{class:"mt-4 text-white font-semibold"},"در حال دریافت اطلاعات...",-1)])])):T("",!0),t("form",{onSubmit:A(M,["prevent"]),class:a({"opacity-50":o.value})},[t("div",K,[e[6]||(e[6]=t("label",{class:"block text-sm font-bold mb-2 text-gray-600 dark:text-gray-400"},"نام گروه",-1)),t("div",P,[D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>s.value.name=u),type:"text",class:a(["input-modern w-full",r.value?"input-dark":"input-light"]),placeholder:"مثلاً: مدیران ارشد، تیم فنی...",required:""},null,2),[[F,s.value.name]])])]),e[12]||(e[12]=t("hr",{class:"my-6 border-gray-200 dark:border-gray-700"},null,-1)),t("div",H,[e[8]||(e[8]=t("label",{class:"block text-sm font-bold mb-2 text-gray-600 dark:text-gray-400"},"اعضای گروه",-1)),t("div",J,[n(w(k),{modelValue:s.value.user,"onUpdate:modelValue":e[1]||(e[1]=u=>s.value.user=u),options:m.value,label:"username","track-by":"id",placeholder:"کاربران مورد نظر را انتخاب کنید...",multiple:!0,searchable:!0,class:a(["custom-multiselect multiselect-rtl",r.value?"multiselect-dark":"multiselect-light"])},null,8,["modelValue","options","class"])]),t("p",O,[n(p,{name:"i-heroicons-information-circle",class:"w-4 h-4 ml-1 inline-block"}),e[7]||(e[7]=d(" کاربران انتخاب شده به صورت خودکار عضو این گروه می‌شوند. ",-1))])]),t("div",Q,[e[9]||(e[9]=t("label",{class:"block text-sm font-bold mb-2 text-gray-600 dark:text-gray-400"},"مجوزهای سطح گروه",-1)),t("div",W,[n(w(k),{modelValue:s.value.permissions,"onUpdate:modelValue":e[2]||(e[2]=u=>s.value.permissions=u),options:y.value,label:"name","track-by":"id",placeholder:"دسترسی‌های این گروه را تعیین کنید...",multiple:!0,searchable:!0,class:a(["custom-multiselect multiselect-rtl warning-mode",r.value?"multiselect-dark":"multiselect-light"])},null,8,["modelValue","options","class"])])]),t("div",X,[t("button",{type:"submit",class:a(["w-full py-3 rounded-xl font-bold transition-all duration-300 shadow-lg hover:shadow-2xl cursor-pointer",["bg-blue-600 hover:bg-blue-700 text-white shadow-blue-500/50",o.value?"opacity-60 cursor-not-allowed":"transform hover:scale-[1.005]"]]),disabled:o.value},[o.value?(c(),f("span",ee,[...e[11]||(e[11]=[t("span",{class:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full ml-2"},null,-1),d(" در حال ارسال... ",-1)])])):(c(),f("span",Z,[n(p,{name:"i-heroicons-plus-circle",class:"w-5 h-5 ml-2"}),e[10]||(e[10]=d(" ثبت و ایجاد گروه جدید ",-1))]))],10,Y),n(h,{to:"/dashboard/system-setting/group/group-list",class:"block w-full text-center text-sm font-medium transition-colors duration-200 cursor-pointer mt-3"},{default:_(()=>[t("span",{class:a(r.value?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700")}," انصراف و بازگشت ",2)]),_:1})])],34)],2)])],2)}}},se=V(te,[["__scopeId","data-v-7c66e51e"]]),oe={};function ae($,i,r,g,o,s){const m=se;return c(),L(m)}const de=V(oe,[["render",ae]]);export{de as default};
