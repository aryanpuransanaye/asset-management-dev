import{A as $,r as h,p as T,c as d,o as c,a as e,h as m,b as l,y as r,d as y,K as j,w as f,e as F,F as N,C as V,t as v}from"./BwLa1Iej.js";import{S as b}from"./BQxta0Da.js";import{a as w}from"./bE3RgOHv.js";import{u as M}from"./DBTBYWdU.js";const D={key:0,class:"text-center py-12"},G={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},S={class:"flex justify-between items-start mb-4"},z={class:"flex gap-2"},L=["onClick"],A={class:"flex-1"},E=["onClick"],q={__name:"group-list",setup(H){const n=M(),t=$(()=>n.value==="dark"),u=h([]),x=h(!1),k=async()=>{x.value=!0;try{const o=await w.get("accounts/groups-list/");u.value=o.data}catch(o){await b.fire({icon:"error",title:"انجام نشد",text:`خطایی رخ داده است ${o}`,timer:2e3,confirmButtonText:"باشه",background:n.value==="dark"?"#1e1e1e":"#fff",color:n.value==="dark"?"#fff":"#000"})}finally{x.value=!1}},_=o=>router.push(`/dashboard/system-setting/group-edit/${o.id}`),p=()=>router.push("/dashboard/system-setting/add-group-user"),C=async o=>{if((await b.fire({title:"آیا مطمئن هستید؟",html:`گروه <b>${o.name}</b> برای همیشه حذف خواهد شد. این عمل غیر قابل بازگشت است.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:t.value?"#374151":"#6c757d",confirmButtonText:"بله، حذف کن!",cancelButtonText:"انصراف",reverseButtons:!0,customClass:{container:t.value?"swal2-dark-mode":"",popup:t.value?"bg-gray-800 text-white":"bg-white text-gray-900",title:t.value?"text-white":"text-gray-900",htmlContainer:t.value?"text-gray-300":"text-gray-700"}})).isConfirmed)try{await w.delete(`accounts/group-detail/${o.id}/`),u.value=u.value.filter(s=>s.id!==o.id),await b.fire({icon:"success",title:"انجام شد",text:"گروه با موفقیت حذف شد",timer:2e3,confirmButtonText:"باشه",background:n.value==="dark"?"#1e1e1e":"#fff",color:n.value==="dark"?"#fff":"#000"})}catch{await b.fire({icon:"error",title:"انجام نشد",text:`خطایی رخ داده است ${err}`,timer:2e3,confirmButtonText:"باشه",background:n.value==="dark"?"#1e1e1e":"#fff",color:n.value==="dark"?"#fff":"#000"})}};return T(k),(o,a)=>{const s=j,g=F;return c(),d("div",{class:r(["groups-list-page w-full p-4 sm:p-6 lg:p-8 min-h-screen",t.value?"bg-gray-900 text-gray-50":"bg-[#F0F5F9] text-gray-900"]),dir:"rtl"},[e("div",{class:r(["flex justify-between items-center mb-8 pb-4 border-b",t.value?"border-gray-800":"border-gray-200"])},[e("div",null,[e("h3",{class:r(["flex items-center text-3xl font-extrabold m-0",t.value?"text-white":"text-gray-900"])},[l(s,{name:"i-heroicons-user-group",class:"w-8 h-8 ml-3 text-blue-500"}),a[0]||(a[0]=y(" مدیریت گروه‌های کاربری ",-1))],2),e("p",{class:r(["text-sm mt-1",t.value?"text-gray-400":"text-gray-500"])},"لیست گروه‌ها، سطوح دسترسی و اعضای سیستم",2)]),l(g,{to:"/dashboard/system-setting/group/add-group-user"},{default:f(()=>[e("button",{class:"flex items-center cursor-pointer px-5 py-2.5 rounded-xl bg-blue-600 text-white text-sm font-medium shadow-lg shadow-blue-500/30 hover:bg-blue-700 transition-all duration-200 focus:ring-4 focus:ring-blue-200 whitespace-nowrap",onClick:p},[l(s,{name:"i-heroicons-plus-circle",class:"w-5 h-5 ml-1"}),a[1]||(a[1]=e("span",{class:"mr-1"},"ایجاد گروه جدید",-1))])]),_:1})],2),x.value?(c(),d("div",D,[a[2]||(a[2]=e("div",{class:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto"},null,-1)),e("p",{class:r(["mt-4 text-lg font-semibold",t.value?"text-gray-300":"text-gray-600"])},"در حال چیدمان گروه‌ها...",2)])):m("",!0),!x.value&&u.value.length?(c(),d("div",G,[(c(!0),d(N,null,V(u.value,i=>(c(),d("div",{key:i.id,class:"col"},[e("div",{class:r(["group-card relative p-6 rounded-2xl shadow-xl transition-all duration-300 transform hover:translate-y-[-6px]",t.value?"bg-gray-800 border border-gray-700 hover:border-blue-500/50":"bg-white border border-gray-100 hover:border-blue-300"])},[e("div",S,[a[3]||(a[3]=e("div",{class:"w-12 h-12 bg-blue-500 text-white rounded-xl flex items-center justify-center text-xl shadow-md shadow-blue-500/40"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])],-1)),e("div",z,[e("button",{onClick:B=>C(i),class:r(["p-2 rounded-full transition-colors duration-200",t.value?"text-gray-400 hover:bg-gray-700 hover:text-red-500":"text-gray-500 hover:bg-gray-100 hover:text-red-600"]),title:"حذف گروه"},[l(s,{name:"i-heroicons-trash",class:"w-5 h-5"})],10,L)])]),e("h5",{class:r(["text-xl mb-8 font-bold",t.value?"text-gray-50":"text-gray-900"])},v(i.name),3),e("div",{class:r(["flex gap-4 mb-5 pt-3 border-t",t.value?"border-gray-700":"border-gray-200"])},[e("div",A,[e("span",{class:r(["block text-xs font-extrabold uppercase mb-1",t.value?"text-blue-400":"text-blue-600"])},"کاربران",2),e("span",{class:r(["text-2xl font-black",t.value?"text-white":"text-gray-900"])},v(i.users_count),3)]),e("div",{class:r(["flex-1 border-r pr-4",t.value?"border-gray-700":"border-gray-300"])},[e("span",{class:r(["block text-xs font-extrabold uppercase mb-1",t.value?"text-amber-400":"text-amber-600"])},"دسترسی‌ها",2),e("span",{class:r(["text-2xl font-black",t.value?"text-white":"text-gray-900"])},v(i.permissions_count),3)],2)],2),l(g,{to:`/dashboard/system-setting/group/group-edit/${i.id}`},{default:f(()=>[e("button",{class:r(["w-full py-2 rounded-xl font-bold text-sm transition-all duration-300 shadow-md",t.value?"bg-blue-600 text-white hover:bg-blue-700 shadow-blue-500/30":"bg-blue-500 text-white hover:bg-blue-600 shadow-blue-500/30"]),onClick:B=>_(i)}," مشاهده و ویرایش جزئیات ",10,E)]),_:2},1032,["to"])],2)]))),128))])):m("",!0),!x.value&&u.value.length===0?(c(),d("div",{key:2,class:r(["text-center py-16 rounded-2xl shadow-xl p-8 max-w-lg mx-auto mt-12",t.value?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"])},[e("span",{class:r(["text-7xl block mb-4",t.value?"text-gray-600":"text-gray-300"])},[l(s,{name:"i-heroicons-folder-open",class:"w-16 h-16 mx-auto"})],2),e("h5",{class:r(["mt-3 text-xl font-semibold",t.value?"text-gray-200":"text-gray-700"])},"هنوز هیچ گروهی تعریف نشده است",2),l(g,{to:"/dashboard/system-setting/group/add-group-user"},{default:f(()=>[e("button",{class:"text-blue-500 cursor-pointer mt-3 font-semibold hover:text-blue-700 transition-colors flex items-center justify-center mx-auto",onClick:p},[l(s,{name:"i-heroicons-plus",class:"w-4 h-4 ml-1"}),a[4]||(a[4]=y(" اولین گروه را بسازید ",-1))])]),_:1})],2)):m("",!0)],2)}}};export{q as default};
