import{_ as z,l as L,x as S,A as B,r as g,p as F,c as i,o as n,a as e,y as f,b as l,d as m,K as q,t as u,i as H,v as K,h as w,w as M,F as $,C as D,R as T,E as P}from"./BwLa1Iej.js";import{a as y}from"./bE3RgOHv.js";import{S as _}from"./BQxta0Da.js";import{u as Q}from"./DBTBYWdU.js";const J={class:"container max-w-7xl mx-auto px-4 py-5",dir:"rtl"},O={class:"flex justify-between items-center mb-6"},W={class:"flex"},X={class:"flex items-center gap-3"},Y={class:"flex items-center gap-3"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start"},ee={class:"flex flex-col h-full"},te={class:"bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl shadow-lg h-full dark:bg-gray-800/90 dark:border-gray-700"},re={class:"bg-blue-50 text-blue-800 font-bold p-4 border-b border-blue-100 rounded-t-2xl dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800"},oe={class:"p-4 border-b border-gray-200 dark:border-gray-700"},se={class:"relative mb-4"},ae={class:"max-h-[500px] overflow-y-auto"},le=["onClick"],ne={class:"flex items-center flex-1 min-w-0"},de={class:"flex flex-col text-right flex-1 min-w-0"},ie={class:"font-medium text-gray-800 dark:text-gray-200 truncate"},ue={class:"text-xs text-gray-500 dark:text-gray-400 truncate font-mono"},ce={key:0,class:"text-center py-6 text-gray-500 text-sm dark:text-gray-400"},be={class:"flex flex-col h-full"},xe={class:"bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl shadow-lg h-full dark:bg-gray-800/90 dark:border-gray-700"},ge={class:"bg-blue-50 text-blue-800 font-bold p-4 border-b border-blue-100 rounded-t-2xl dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800"},fe={class:"p-4 max-h-[600px] overflow-y-auto"},me=["onClick"],ve={class:"flex items-center flex-1 min-w-0"},he={class:"flex flex-col text-right flex-1 min-w-0"},pe={class:"font-bold text-gray-800 dark:text-gray-200 truncate"},ke={class:"text-xs text-blue-700 dark:text-blue-300 truncate font-mono"},we={key:0,class:"text-center py-6 text-gray-500 text-sm dark:text-gray-400"},ye={class:"flex justify-center text-center mt-8"},_e=["disabled"],Ce={key:0,class:"mr-2 animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"},je={__name:"GroupEditGroupUpdateUsers",setup(G){const C=L(),v=S(),h=C.params.groupID,d=Q(),c=B(()=>d.value==="dark"),b=g(!1),j=g(!1),p=g(""),U=g(""),x=g([]),s=g([]),I=()=>{v.back()},N=async()=>{b.value=!0;try{const[r,t]=await Promise.all([y.get(`accounts/group-detail/${h}/`),y.get("accounts/users-list/")]);U.value=r.data.name,s.value=r.data.group_users||[],x.value=t.data.filter(a=>!s.value.some(o=>o.id===a.id))}catch(r){await _.fire({icon:"error",title:"انجام نشد",text:`خطایی رخ داده است ${r}`,timer:2e3,confirmButtonText:"باشه",background:d.value==="dark"?"#1e1e1e":"#fff",color:d.value==="dark"?"#fff":"#000"})}finally{b.value=!1}},k=B(()=>{const r=p.value.toLowerCase().trim();return r?x.value.filter(t=>t.username.toLowerCase().includes(r)||t.email&&t.email.toLowerCase().includes(r)):x.value}),R=r=>{s.value.unshift(r),x.value=x.value.filter(t=>t.id!==r.id)},V=r=>{x.value.unshift(r),s.value=s.value.filter(t=>t.id!==r.id)},A=async()=>{j.value=!0;try{const r={name:U.value,users:s.value.map(t=>t.id)};await y.patch(`accounts/group-detail/${h}/`,r),await _.fire({icon:"success",title:"ذخیره شد",text:"اعضای گروه با موفقیت تغییر کرد.",confirmButtonText:"عالی",background:d.value==="dark"?"#1e1e1e":"#fff",color:d.value==="dark"?"#fff":"#000"}),v.back()}catch(r){await _.fire({icon:"error",title:"انجام نشد",text:`خطایی رخ داده است ${r}`,timer:2e3,confirmButtonText:"باشه",background:d.value==="dark"?"#1e1e1e":"#fff",color:d.value==="dark"?"#fff":"#000"})}finally{j.value=!1}};return F(N),(r,t)=>{const a=q;return n(),i("div",J,[e("div",O,[e("h3",{class:f(["flex items-center text-2xl font-bold",c.value?"text-gray-100":"text-gray-900"])},[l(a,{name:"i-heroicons-users",class:"w-8 h-8 text-blue-600 dark:text-blue-400 ml-3"}),t[1]||(t[1]=m(" مدیریت اعضای گروه ",-1))],2),e("div",W,[e("div",X,[e("div",{class:f(["px-3 py-1 rounded-lg text-xs font-bold",c.value?"bg-blue-900/50 text-blue-300":"bg-blue-100 text-blue-700"])},u(s.value.length)+" / "+u(s.value.length+k.value.length)+" کاربر ",3)]),e("button",{onClick:I,class:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white group"},[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5 transform transition-transform group-hover:-translate-x-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})],-1),e("span",{class:"font-medium hidden sm:inline"},"بازگشت",-1)])])])]),e("div",{class:f(["mb-6 p-4 rounded-xl border shadow-lg",c.value?"bg-gray-800 border-gray-700":"bg-white border-gray-100"])},[e("div",Y,[l(a,{name:"i-heroicons-information-circle",class:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0"}),e("p",{class:f(["text-sm font-medium",c.value?"text-gray-300":"text-gray-700"])}," برای جابه‌جایی کاربر، روی نام کاربری کلیک کنید ",2)])],2),e("div",Z,[e("div",ee,[e("div",te,[e("div",re,[l(a,{name:"i-heroicons-archive-box-arrow-down",class:"w-5 h-5 text-blue-600 dark:text-blue-400 ml-2"}),t[3]||(t[3]=m(" مخزن کاربران ",-1))]),e("div",oe,[e("div",se,[l(a,{name:"i-heroicons-magnifying-glass",class:"absolute right-3 top-3.5 text-gray-500 w-5 h-5"}),H(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),type:"text",class:"w-full p-3 pr-10 rounded-lg border border-gray-300 bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"جستجوی نام یا ایمیل...",autofocus:""},null,512),[[K,p.value]])]),e("div",ae,[l(T,{name:"list",tag:"div",class:"space-y-3"},{default:M(()=>[(n(!0),i($,null,D(k.value,o=>(n(),i("div",{key:o.id,class:"flex justify-between items-center p-4 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 transition-all duration-200 cursor-pointer dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",onClick:E=>R(o)},[e("div",ne,[e("div",{class:f(["w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm ml-3 shrink-0",c.value?"bg-blue-900/50 text-blue-300":"bg-blue-100 text-blue-600"])},u(o.username.charAt(0).toUpperCase()),3),e("div",de,[e("span",ie,u(o.username),1),e("span",ue,u(o.email||"بدون ایمیل"),1)])]),t[4]||(t[4]=e("button",{class:"w-9 h-9 rounded-full bg-green-100 text-green-600 hover:bg-green-600 hover:text-white transition-colors duration-200 flex items-center justify-center dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-600 dark:hover:text-white",title:"اضافه کردن"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"})])],-1))],8,le))),128))]),_:1}),k.value.length===0?(n(),i("div",ce,[l(a,{name:"i-heroicons-inbox-arrow-down",class:"w-8 h-8 mx-auto mb-3 text-blue-400 dark:text-blue-600"}),t[5]||(t[5]=m(" موردی یافت نشد ",-1))])):w("",!0)])])])]),e("div",be,[e("div",xe,[e("div",ge,[l(a,{name:"i-heroicons-key",class:"w-5 h-5 text-blue-600 dark:text-blue-400 ml-2"}),t[6]||(t[6]=m(" اعضای فعال ",-1))]),e("div",fe,[l(T,{name:"list",tag:"div",class:"space-y-3"},{default:M(()=>[(n(!0),i($,null,D(s.value,o=>(n(),i("div",{key:o.id,class:"flex justify-between items-center p-4 rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-all duration-200 cursor-pointer dark:bg-blue-900/20 dark:border-blue-800 dark:hover:bg-blue-900/30",onClick:E=>V(o)},[t[7]||(t[7]=e("button",{class:"w-9 h-9 rounded-full bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-colors duration-200 flex items-center justify-center dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-600 dark:hover:text-white",title:"حذف کاربر"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})])],-1)),e("div",ve,[e("div",{class:f(["w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm ml-3 shrink-0",c.value?"bg-blue-800/50 text-blue-200":"bg-blue-200 text-blue-800"])},u(o.username.charAt(0).toUpperCase()),3),e("div",he,[e("span",pe,u(o.username),1),e("span",ke,u(o.email||"بدون ایمیل"),1)])])],8,me))),128))]),_:1}),s.value.length===0?(n(),i("div",we,[l(a,{name:"i-heroicons-shield-exclamation",class:"w-8 h-8 mx-auto mb-3 text-blue-500"}),t[8]||(t[8]=e("p",{class:"mt-2 font-bold"},"هیچ عضوی فعال نیست",-1)),t[9]||(t[9]=e("p",{class:"text-xs mt-1"},"از لیست سمت راست اضافه کنید",-1))])):w("",!0)])])])]),e("div",ye,[e("button",{onClick:A,disabled:b.value,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full px-8 py-4 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center dark:from-blue-600 dark:to-blue-800"},[b.value?(n(),i("span",Ce)):w("",!0),t[10]||(t[10]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6 ml-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"})],-1)),t[11]||(t[11]=m(" ثبت و به‌روزرسانی نهایی ",-1))],8,_e)])])}}},Ue=z(je,[["__scopeId","data-v-5c3c775e"]]),Be={};function Me(G,C,v,h,d,c){const b=Ue;return n(),P(b)}const Ge=z(Be,[["render",Me]]);export{Ge as default};
