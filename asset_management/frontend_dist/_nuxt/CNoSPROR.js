import{_ as I,l as S,x as U,A as j,r as g,p as A,S as F,c as n,o as a,a as e,y as v,d as m,t as x,b as d,i as H,v as q,h as w,w as $,F as P,C as D,R as z,E as Q}from"./BwLa1Iej.js";import{a as y}from"./bE3RgOHv.js";import{S as _}from"./BQxta0Da.js";import{u as Z}from"./DBTBYWdU.js";const J={class:"container max-w-7xl mx-auto px-4 py-5",dir:"rtl"},K={class:"flex justify-between items-center mb-6"},O={class:"flex"},W={class:"flex items-center gap-3"},X={class:"flex items-center gap-3"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start"},ee={class:"flex flex-col h-full"},te={class:"bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl shadow-lg h-full dark:bg-gray-800/90 dark:border-gray-700"},re={class:"bg-blue-50 text-blue-800 font-bold p-4 border-b border-blue-100 rounded-t-2xl dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800"},oe={class:"p-4 border-b border-gray-200 dark:border-gray-700"},se={class:"relative mb-4"},ae={class:"max-h-[500px] overflow-y-auto"},le=["onClick"],ne={class:"flex flex-col"},ie={class:"font-medium text-gray-800 dark:text-gray-200"},de={class:"text-xs text-gray-500 dark:text-gray-400"},ue={key:0,class:"text-center py-6 text-gray-500 text-sm dark:text-gray-400"},ce={class:"flex flex-col h-full"},be={class:"bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl shadow-lg h-full dark:bg-gray-800/90 dark:border-gray-700"},ge={class:"bg-blue-50 text-blue-800 font-bold p-4 border-b border-blue-100 rounded-t-2xl dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800"},xe={class:"p-4 max-h-[600px] overflow-y-auto"},ve=["onClick"],me={class:"flex flex-col"},fe={class:"font-bold text-gray-800 dark:text-gray-200"},he={class:"text-xs text-blue-700 dark:text-blue-300"},pe={key:0,class:"text-center py-6 text-gray-500 text-sm dark:text-gray-400"},ke={class:"flex justify-center text-center mt-8"},we=["disabled"],ye={key:0,class:"mr-2 animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"},_e={__name:"GroupEditGroupPermissionsManagement",setup(T){const C=S(),f=U(),h=C.params.groupID,l=Z(),u=j(()=>l.value==="dark"),c=g(!1),M=g(!1),p=g(""),B=g(""),b=g([]),s=g([]),V=()=>{f.back()},G=async()=>{c.value=!0;try{const[r,t]=await Promise.all([y.get(`accounts/group-detail/${h}/`),y.get("accounts/permissions-list/")]);B.value=r.data.name,s.value=r.data.group_permissions||[],b.value=t.data.filter(i=>!s.value.some(o=>o.id===i.id))}catch(r){await _.fire({icon:"error",title:"انجام نشد",text:`خطایی رخ داده است ${r}`,timer:2e3,confirmButtonText:"باشه",background:l.value==="dark"?"#1e1e1e":"#fff",color:l.value==="dark"?"#fff":"#000"})}finally{c.value=!1}},k=j(()=>{const r=p.value.toLowerCase().trim();return r?b.value.filter(t=>t.name.toLowerCase().includes(r)||t.codename.toLowerCase().includes(r)):b.value}),N=r=>{s.value.unshift(r),b.value=b.value.filter(t=>t.id!==r.id)},R=r=>{b.value.unshift(r),s.value=s.value.filter(t=>t.id!==r.id)},E=async()=>{M.value=!0;try{const r={name:B.value,permissions:s.value.map(t=>t.id)};await y.patch(`accounts/group-detail/${h}/`,r),await _.fire({icon:"success",title:"ذخیره شد",text:"دسترسی های گروه با موفقیت تغیر کرد.",confirmButtonText:"عالی",background:l.value==="dark"?"#1e1e1e":"#fff",color:l.value==="dark"?"#fff":"#000"}),f.back()}catch(r){await _.fire({icon:"error",title:"انجام نشد",text:`خطایی رخ داده است ${r}`,timer:2e3,confirmButtonText:"باشه",background:l.value==="dark"?"#1e1e1e":"#fff",color:l.value==="dark"?"#fff":"#000"})}finally{M.value=!1}};return A(G),(r,t)=>{const i=F("UIicon");return a(),n("div",J,[e("div",K,[e("h3",{class:v(["flex items-center text-2xl font-bold",u.value?"text-gray-100":"text-gray-900"])},[...t[1]||(t[1]=[e("span",{class:"text-blue-600 text-3xl mr-3 ml-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])],-1),m(" مدیریت دسترسی‌های گروه ",-1)])],2),e("div",O,[e("div",W,[e("div",{class:v(["px-3 py-1 rounded-lg text-xs font-bold",u.value?"bg-blue-900/50 text-blue-300":"bg-blue-100 text-blue-700"])},x(s.value.length)+" / "+x(s.value.length+k.value.length)+" مجوز ",3)]),e("button",{onClick:V,class:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white group"},[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5 transform transition-transform group-hover:-translate-x-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})],-1),e("span",{class:"font-medium hidden sm:inline"},"بازگشت",-1)])])])]),e("div",{class:v(["mb-6 p-4 rounded-xl border shadow-lg",u.value?"bg-gray-800 border-gray-700":"bg-white border-gray-100"])},[e("div",X,[d(i,{name:"i-heroicons-information-circle",class:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0"}),e("p",{class:v(["text-sm font-medium",u.value?"text-gray-300":"text-gray-700"])}," برای جابه‌جایی دسترسی، روی هر مجوز کلیک کنید ",2)])],2),e("div",Y,[e("div",ee,[e("div",te,[e("div",re,[d(i,{name:"i-heroicons-archive-box-arrow-down",class:"w-5 h-5 text-blue-600 dark:text-blue-400 ml-2"}),t[3]||(t[3]=m(" مخزن دسترسی‌ها ",-1))]),e("div",oe,[e("div",se,[t[4]||(t[4]=e("span",{class:"absolute right-3 top-3 text-gray-500 text-lg"},null,-1)),H(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),type:"text",class:v(["w-full p-3 rounded-lg border border-gray-300 bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",u.value?"text-white":"text-gray-900"]),placeholder:"جستجوی نام یا کد مجوز...",autofocus:""},null,2),[[q,p.value]])]),e("div",ae,[d(z,{name:"list",tag:"div",class:"space-y-3"},{default:$(()=>[(a(!0),n(P,null,D(k.value,o=>(a(),n("div",{key:o.id,class:"flex justify-between items-center p-4 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 transition-all duration-200 cursor-pointer dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",onClick:L=>N(o)},[e("div",ne,[e("span",ie,x(o.name),1),e("code",de,x(o.codename||"system_perm"),1)]),t[5]||(t[5]=e("button",{class:"w-9 h-9 rounded-full bg-green-100 text-green-600 hover:bg-green-600 hover:text-white transition-colors duration-200 flex items-center justify-center dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-600 dark:hover:text-white",title:"اضافه کردن"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"})])],-1))],8,le))),128))]),_:1}),k.value.length===0?(a(),n("div",ue,[d(i,{name:"i-heroicons-inbox-arrow-down",class:"w-8 h-8 mx-auto mb-3 text-blue-400 dark:text-blue-600"}),t[6]||(t[6]=m(" موردی یافت نشد ",-1))])):w("",!0)])])])]),e("div",ce,[e("div",be,[e("div",ge,[d(i,{name:"i-heroicons-key",class:"w-5 h-5 text-blue-600 dark:text-blue-400 ml-2"}),t[7]||(t[7]=m(" مجوزهای فعال ",-1))]),e("div",xe,[d(z,{name:"list",tag:"div",class:"space-y-3"},{default:$(()=>[(a(!0),n(P,null,D(s.value,o=>(a(),n("div",{key:o.id,class:"flex justify-between items-center p-4 rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-all duration-200 cursor-pointer dark:bg-blue-900/20 dark:border-blue-800 dark:hover:bg-blue-900/30",onClick:L=>R(o)},[t[8]||(t[8]=e("button",{class:"w-9 h-9 rounded-full bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-colors duration-200 flex items-center justify-center dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-600 dark:hover:text-white",title:"حذف دسترسی"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})])],-1)),e("div",me,[e("span",fe,x(o.name),1),e("code",he,x(o.codename),1)])],8,ve))),128))]),_:1}),s.value.length===0?(a(),n("div",pe,[d(i,{name:"i-heroicons-shield-exclamation",class:"w-8 h-8 mx-auto mb-3 text-blue-500"}),t[9]||(t[9]=e("p",{class:"mt-2 font-bold"},"هیچ مجوزی فعال نیست",-1)),t[10]||(t[10]=e("p",{class:"text-xs mt-1"},"از لیست سمت راست اضافه کنید",-1))])):w("",!0)])])])]),e("div",ke,[e("button",{onClick:E,disabled:c.value,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full px-8 py-4 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center dark:from-blue-600 dark:to-blue-800"},[c.value?(a(),n("span",ye)):w("",!0),t[11]||(t[11]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"})],-1)),t[12]||(t[12]=m(" ثبت و به‌روزرسانی نهایی ",-1))],8,we)])])}}},Ce=I(_e,[["__scopeId","data-v-d43322a8"]]),Me={};function Be(T,C,f,h,l,u){const c=Ce;return a(),Q(c)}const ze=I(Me,[["render",Be]]);export{ze as default};
